# EntityManager

- JPA의 핵심 인터페이스
- 객체 관계 ORM의 일부로서, 디비와의 상호작용을 관리
- 엔티티의 생명주기 관리 ( 객체 생성, 읽기, 업데이트, 삭제)
- 트랜잭션 관리
- 캐싱 (일차캐시 적용) => 트랜잭션 동안 조회된 엔티티 인스턴스를 저장하고 관리함
- 엔티티 상태 관리 : 엔티티의 상태를 관리함
- 연관 관계 관리 : 엔티티간의 연관관계를 관리함. 이를 통해 복잡한 객체 그래프를 유지하고 관리할 수 있음

## merge 메소드

- JPA 의 EntityManger 인터페이스에 정의된 메소드로, 엔티티의 상태를 관리하는 데 쓰임
- 그 과정에서 변경된 내용을 디비와 동기화함.
- merge메서드는 인자로 전달된 엔티티가 디비에 이미 존재하는지 확인
  => 엔티티의 pk를 사용하여 판단함
- EntityManger : 해당 엔티티의 새 인스턴스를 생성하고, 전달된 엔티티의 상태를 새 인스턴스에 복사함.
- 변경사항 동기화 : merge를 호출 후, 트랜잭션이 커밋될 때 JPA는 관리 상태에 있는 엔티티의 변경사항을 디비와 동기화함.
  => 변경된 필드에 대한 SQL 'update'문을 발생시킴.
